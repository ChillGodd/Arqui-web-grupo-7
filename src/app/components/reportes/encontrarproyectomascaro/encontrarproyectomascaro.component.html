<div class="container">
  <h2>Proyectos</h2>
  
  <div>
    <h3>Obtener Proyecto con Mayor Costo</h3>
    <button (click)="getProyectoConMayorCosto()">Obtener Proyecto con Mayor Costo</button>
    <div *ngIf="loadingMayorCosto">
      <p>Cargando el proyecto con mayor costo...</p>
    </div>
    <div *ngIf="proyectoConMayorCosto && !loadingMayorCosto" class="project-details">
      <p><strong>Nombre:</strong> {{ proyectoConMayorCosto.nombre }}</p>
      <p><strong>Descripción:</strong> {{ proyectoConMayorCosto.descripcion }}</p>
      <p><strong>Fecha de Inicio:</strong> {{ proyectoConMayorCosto.fechaInicio }}</p>
      <p><strong>Fecha de Fin:</strong> {{ proyectoConMayorCosto.fechaFin }}</p>
      <p><strong>Presupuesto:</strong> {{ proyectoConMayorCosto.presupuesto }}</p>
      <p><strong>Usuario:</strong> {{ proyectoConMayorCosto.user.nombreUser }}</p>
    </div>
  </div>

  <div>
    <h3>Buscar Proyectos por Presupuesto</h3>
    <input type="text" [(ngModel)]="presupuesto" placeholder="Ingrese presupuesto">
    <button (click)="getProyectosConMayorPresupuesto()">Buscar Proyectos</button>
    <div *ngIf="loadingPresupuesto">
      <p>Cargando proyectos...</p>
    </div>
    <div *ngIf="proyectosConMayorPresupuesto && proyectosConMayorPresupuesto.length > 0">
      <h3>Proyectos con Presupuesto Mayor a {{ presupuesto }}</h3>
      <table mat-table [dataSource]="proyectosConMayorPresupuesto" class="mat-elevation-z8">
        <ng-container matColumnDef="nombre">
          <th mat-header-cell *matHeaderCellDef> Nombre </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.nombre }} </td>
        </ng-container>
        <ng-container matColumnDef="descripcion">
          <th mat-header-cell *matHeaderCellDef> Descripción </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.descripcion }} </td>
        </ng-container>
        <ng-container matColumnDef="fechaInicio">
          <th mat-header-cell *matHeaderCellDef> Fecha de Inicio </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.fechaInicio }} </td>
        </ng-container>
        <ng-container matColumnDef="fechaFin">
          <th mat-header-cell *matHeaderCellDef> Fecha de Fin </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.fechaFin }} </td>
        </ng-container>
        <ng-container matColumnDef="presupuesto">
          <th mat-header-cell *matHeaderCellDef> Presupuesto </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.presupuesto }} </td>
        </ng-container>
        <ng-container matColumnDef="usuario">
          <th mat-header-cell *matHeaderCellDef> Usuario </th>
          <td mat-cell *matCellDef="let proyecto"> {{ proyecto.user.nombreUser }} </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
    <div *ngIf="!proyectosConMayorPresupuesto || proyectosConMayorPresupuesto.length === 0 && !loadingPresupuesto">
      <p>No hay proyectos con un presupuesto mayor a {{ presupuesto }}.</p>
    </div>
  </div>
</div>
